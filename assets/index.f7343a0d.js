import{C as G,D as K,E as M,q as p,_ as D,I as z,a as v,c as l,d as m,e as c,F as J,f as Q,t as P,B as U,g as W,p as E,k as R,M as X,u as Y,r as i,G as Z,w as $,H as x,l as y,j,K as H}from"./index.dfb2e5d9.js";import{g as ee}from"./getLayout.84456cf4.js";import{S as te}from"./index.e2b5c03c.js";import oe from"./index.3246085b.js";import"./moveSide.4719a2b2.js";const f=G({limit:15,projectTypes:[],projectList:{}});K(f);async function ne(){return f.projectTypes=await M.getProjectType(),f.projectTypes}async function se(t){return f.projectList=await M.getProjectList(t),f.projectList}function ae(t,s){const r=p(()=>s.isLoading.value),e=p(()=>r.value?[]:[{id:-1,name:"\u5168\u90E8"},...s.data.value.data]),u=p(()=>t.params.categoryId||-1),d=p(()=>e.value.map(o=>({...o,isSelect:o.id===u.value})));return{typeLoading:r,projectTypes:d}}const ce={setup(t,s){function r(o){s.emit("projectClick",o)}function e(o){s.emit("categoryClick",o)}const u=U(d,100);function d(o){s.emit("handleScroll",o)}return{handleScroll:u,projectClick:r,categoryClick:e}},props:{list:{type:Object,required:!0},bottomText:{type:String,default:!0}},components:{Icon:z}},le=t=>(E("data-v-2d80106d"),t=t(),R(),t),re={class:"banner"},ie={class:"aspect"},ue=["src"],de={class:"info"},pe=["onClick"],_e={class:"text"},ye=["onClick"],ve=le(()=>c("span",{class:"cutLine"},"|",-1)),me=["onClick"],fe={class:"loadMore"};function ge(t,s,r,e,u,d){const o=v("Icon");return l(),m("div",{id:"projectList-container",onScroll:s[0]||(s[0]=(...n)=>e.handleScroll&&e.handleScroll(...n))},[c("ul",null,[(l(!0),m(J,null,Q(r.list,n=>(l(),m("li",{key:n.id},[c("div",re,[c("div",ie,[c("img",{src:n.banner},null,8,ue)])]),c("div",de,[c("span",{class:"type",onClick:_=>e.projectClick(n)},[W(o,{type:n.type},null,8,["type"])],8,pe),c("div",_e,[c("span",{class:"title",onClick:_=>e.projectClick(n)},P(n.title),9,ye),ve,c("span",{class:"category",onClick:_=>e.categoryClick(n.category)},P(n.category.name),9,me)])])]))),128))]),c("span",fe,P(r.bottomText),1)],32)}const he=D(ce,[["render",ge],["__scopeId","data-v-2d80106d"]]);const je={setup(){const t=ee(),s=X(),r=Y(),e=i(1),u=i(null),d=p(()=>u.value?Math.ceil(u.value/15):2),o=p(()=>{const q=e.value,F=s.params.categoryId||-1;return{limit:15,page:q,categoryid:F}}),n=Z(ne,[]),_=ae(s,n);function k(a){a.id===-1?o.value.categoryid!==-1&&(r.push({name:"Project"}),g.value=!0):(r.push({name:"CategoryProject",params:{categoryId:a.id}}),g.value=!0)}const L=i(null),T=i({data:{}}),g=i(!0),b=i(!1),h=i([]);async function C(){b.value=!0,T.value=await se(o.value),u.value=T.value.data.total,h.value.push(T.value.data.rows),h.value=h.value.flat(),g.value=!1,b.value=!1}C(),$(s,()=>{C()});const B=p(()=>e.value>d.value?"\u6CA1\u6709\u66F4\u591A\u4E86":"\u6B63\u5728\u52A0\u8F7D\u4E2D...");function V(a){if(a.target.scrollTop>=a.target.scrollHeight-a.target.offsetHeight-100&&!b.value){if(e.value+=1,e.value>d.value)return;C()}}const S=i(!1),I=i([]),w=i(""),A=i("");function O(){S.value=!1}function N(a){a.type==="link"?window.open(a.url):(I.value=a.imgs,w.value=a.title,A.value=a.text,S.value=!0)}return{rows:h,isLoading:g,projectList:L,...t,..._,showAlbum:S,albumPhotos:I,albumTitle:w,albumText:A,bottomText:B,handleSelect:k,projectClick:N,loadMore:V,closeAlbum:O}},components:{ProjectList:he,LevelList:x(()=>H(()=>import("./index.f45425fb.js"),["assets/index.f45425fb.js","assets/index.f2dbddd6.css","assets/index.dfb2e5d9.js","assets/index.936cb685.css"])),Skeleton:te,TopList:x(()=>H(()=>import("./index.48421988.js"),["assets/index.48421988.js","assets/index.b6820cc2.css","assets/index.dfb2e5d9.js","assets/index.936cb685.css","assets/moveSide.4719a2b2.js"])),Album:oe}},ke=t=>(E("data-v-906fd3e6"),t=t(),R(),t),Le={id:"project-container"},Te={key:0,class:"appProjectType"},be={ref:"projectList",class:"projectList"},Ce={key:1,class:"projectType"},Se=ke(()=>c("h4",null,"\u9879\u76EE\u5206\u7C7B",-1));function Pe(t,s,r,e,u,d){const o=v("TopList"),n=v("Skeleton"),_=v("ProjectList"),k=v("LevelList"),L=v("Album");return l(),m("div",Le,[t.layoutRef!=="lg"?(l(),m("div",Te,[t.typeLoading?j("",!0):(l(),y(o,{key:0,list:t.projectTypes,title:"\u9879\u76EE\u5206\u7C7B",onHandleSelect:e.handleSelect},null,8,["list","onHandleSelect"]))])):j("",!0),c("div",be,[e.isLoading?(l(),y(n,{key:0,type:"projectList"})):(l(),y(_,{key:1,list:e.rows,bottomText:e.bottomText,onCategoryClick:e.handleSelect,onProjectClick:e.projectClick,onHandleScroll:e.loadMore},null,8,["list","bottomText","onCategoryClick","onProjectClick","onHandleScroll"]))],512),t.layoutRef==="lg"?(l(),m("div",Ce,[Se,t.typeLoading?(l(),y(n,{key:0,type:"blogType"})):(l(),y(k,{key:1,list:t.projectTypes,isPc:t.isPc,onHandleSelect:e.handleSelect},null,8,["list","isPc","onHandleSelect"]))])):j("",!0),e.showAlbum?(l(),y(L,{key:2,photos:e.albumPhotos,title:e.albumTitle,text:e.albumText,onCloseAlbum:e.closeAlbum,pacModele:"album"},null,8,["photos","title","text","onCloseAlbum"])):j("",!0)])}const Me=D(je,[["render",Pe],["__scopeId","data-v-906fd3e6"]]);export{Me as default};
