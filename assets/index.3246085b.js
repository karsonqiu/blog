import{g as A}from"./getLayout.84456cf4.js";import{m as D}from"./moveSide.4719a2b2.js";import{_ as R,r as f,w as N,O as S,c as m,d as r,e as s,F as E,f as M,z as P,I as H,a as B,t as b,j as k,g as x,n as L,p as q,k as z}from"./index.dfb2e5d9.js";const V={setup(t,d){const e=f([]),n=f([]);function h(a){e.value.includes(a)||e.value.push(a)}let l=0,u=8;function i(){e.value.length!==0&&e.value.forEach((a,v)=>{a.scrollHeight===u&&(l=0),a.scrollHeight<u&&(l=v)})}function c(a){a.forEach((v,y)=>{const o=document.createElement("div");o.className="imgBox",o.style.marginBottom=`calc(${t.spacing} + ${t.spacing})`;const w=document.createElement("div");w.className="darkBack";const _=new Image;if(_.src=v,_.className="picImg",o.addEventListener("click",()=>{d.emit("pacChange",_.src)}),t.pacModele==="pac")o.appendChild(_),o.appendChild(w),y===0?(i(),e.value[l].appendChild(o),u=e.value[l].offsetHeight):_.addEventListener("load",()=>{i(),e.value[l].appendChild(o),u=e.value[l].offsetHeight});else if(t.pacModele==="album"){const I=document.createElement("div");I.className="aspect";const C=document.createElement("div");C.className="deepImg",o.appendChild(I),I.appendChild(_),I.appendChild(w),I.appendChild(C),i(),e.value[l].appendChild(o),u=e.value[l].offsetHeight,_.addEventListener("load",async()=>{C.remove()})}n.value.push(o)})}const g=/\w+\.\w+\b$/g;function p(){n.value.forEach(a=>{t.nowImg&&(a.className="imgBox",t.pacModele==="pac"?a.childNodes[0].src.match(g)[0]===t.nowImg.match(g)[0]&&(a.className="imgBox nowImg"):a.childNodes[0].childNodes[0].src.match(g)[0]===t.nowImg.match(g)[0]&&(a.className="imgBox nowImg"))})}return N(t,()=>{p()}),S(()=>{c(t.imgs),p()}),{td:h}},props:{tdNum:{type:Number,required:!0},imgs:{type:Array,required:!0},spacing:{type:String,default:"4px"},nowImg:{type:String},pacModele:{type:String,required:!0}}},F={class:"Pac-container"},j={class:"pacBox"};function O(t,d,e,n,h,l){return m(),r("div",F,[s("ul",j,[(m(!0),r(E,null,M(e.tdNum,u=>(m(),r("li",{ref_for:!0,ref:n.td,class:"td",key:u,style:P({width:`calc(100% / ${e.tdNum} - ${e.spacing} - ${e.spacing})`,padding:e.spacing})},null,4))),128))])])}const T=R(V,[["render",O]]);const G={setup(t,d){const e=A(),n=f(null),h=f("");function l(o){h.value=o}function u(){d.emit("closeAlbum")}const i=f(null),c=f([]);function g(o){c.value.includes(o)||c.value.push(o)}const p=/\w+\.\w+\b$/g,a=f(0),v=f(null);function y(o){a.value=o,o<0?a.value=t.photos.length-1:o>t.photos.length-1&&(a.value=0),l(t.photos[a.value]),e.layoutRef.value!=="lg"&&v.value&&v.value(c.value[a.value])}return S(()=>{l(t.photos[0])}),N(i,()=>{i.value&&(v.value=D(i.value))}),N(e.layoutRef,()=>{e.layoutRef.value!=="lg"&&(a.value=t.photos.findIndex(o=>h.value.match(p)[0]===o.match(p)[0]),y(a.value))}),{nowImgRef:h,albumDom:n,...e,indexRef:a,pageBox:i,moveItem:g,closeAlbum:u,nowImgChange:l,changeImg:y}},props:{photos:{type:Array,required:!0},title:{type:String,default:""},text:{type:String,default:""},pacModele:{type:String,default:"pac"}},components:{Icon:H,Pac:T}},J=t=>(q("data-v-3e287442"),t=t(),z(),t),K={class:"Album-container"},Q={ref:"albumDom",class:"album"},U={class:"photosBox"},W={class:"nowPhoto"},X=["src"],Y={key:0,class:"rightBox"},Z={key:0,class:"textBox"},$={class:"title"},ee={class:"text"},te={class:"photos"},ae={key:1,class:"carousel"},oe={ref:"pageBox",class:"pageBox"},ne={class:"page"},se=["onClick"],le=["src"],ce=J(()=>s("div",{class:"shade"},null,-1));function ie(t,d,e,n,h,l){const u=B("Pac"),i=B("Icon");return m(),r("div",K,[s("div",Q,[s("div",{class:"backImg",style:P({backgroundImage:`url(${n.nowImgRef})`})},null,4),s("div",U,[s("div",W,[s("img",{src:n.nowImgRef},null,8,X)]),t.layoutRef==="lg"?(m(),r("div",Y,[e.title&&e.text?(m(),r("div",Z,[s("h4",$,b(e.title),1),s("p",ee,b(e.text),1)])):k("",!0),s("div",te,[x(u,{tdNum:2,imgs:e.photos,onPacChange:n.nowImgChange,nowImg:n.nowImgRef,pacModele:e.pacModele},null,8,["imgs","onPacChange","nowImg","pacModele"])])])):k("",!0),s("div",{onClick:d[0]||(d[0]=(...c)=>n.closeAlbum&&n.closeAlbum(...c)),class:"close"},[x(i,{type:"close"})]),t.layoutRef!=="lg"?(m(),r("div",ae,[s("div",{class:"left pager",onClick:d[1]||(d[1]=c=>n.changeImg(--n.indexRef))},[x(i,{type:"leftPager"})]),s("div",{class:"right pager",onClick:d[2]||(d[2]=c=>n.changeImg(++n.indexRef))},[x(i,{type:"rightPager"})]),s("div",oe,[s("ul",ne,[(m(!0),r(E,null,M(e.photos,(c,g)=>(m(),r("li",{key:c,class:L({active:n.nowImgRef===c}),onClick:p=>n.changeImg(g)},[s("div",null,[s("img",{ref_for:!0,ref:n.moveItem,src:c},null,8,le),ce])],10,se))),128))])],512)])):k("",!0)])],512)])}const re=R(G,[["render",ie],["__scopeId","data-v-3e287442"]]);export{re as default};
